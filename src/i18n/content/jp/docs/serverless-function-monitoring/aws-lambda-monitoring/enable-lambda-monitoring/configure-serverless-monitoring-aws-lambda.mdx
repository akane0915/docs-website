---
title: 追加設定
metaDescription: 'After enabling New Relic''s AWS Lambda monitoring, you can set up alerts and custom events.'
freshnessValidatedDate: never
translationType: machine
---

[AWS Lambda](/docs/serverless-function-monitoring/aws-lambda-monitoring/enable-lambda-monitoring/enable-aws-lambda-monitoring) のサーバーレス監視を有効にした後、データを微調整するために追加の構成を追加することができます。

## インフィニット トレースの有効化 [#infinite-tracing]

Lambdaレイヤーを使用して関数を設定した場合、分散トレーシングはデフォルトで含まれています。

Lambda関数が[InfiniteTracing](/docs/distributed-tracing/infinite-tracing/introduction-infinite-tracing)と呼ばれるテールベースの分散トレースを使用するサービスと通信する場合は、Lambda関数に対してこの機能を有効にする必要があります。これにより、LambdaスパンがInfiniteTracingによって追跡される残りのスパンに含まれるようになります。

これをLambda関数に設定するには、 [Infinite Tracing steps](/docs/distributed-tracing/infinite-tracing/set-trace-observer) を参照して、トレースオブザーバーを作成し、どのLambda関数（データソース）がスパンをレポートするかを選択します。

## アラートの設定 [#alerts]

<InlinePopover type="alerts"/>New RelicAPMを使用すると、 メトリックス、キートランザクション、NRQL クエリなど、 で監視できるあらゆるものについて通知を受け取ることができます。[アラートのドキュメントを](/docs/alerts-applied-intelligence/new-relic-alerts/learn-alerts/introduction-alerts/)ご覧ください。

## カスタムイベントの追加 [#custom-events]

我々がデフォルトで提供するデータの他に、独自の [イベント](/docs/using-new-relic/welcome-new-relic/get-started/glossary#event) または [属性](/docs/using-new-relic/welcome-new-relic/get-started/glossary#attribute) を設定することもできます。

これらの言語固有の設定の詳細については、 [Configuring custom attributes and events in AWS Lambda](https://discuss.newrelic.com/t/configuring-custom-attributes-and-events-in-aws-lambda/96043) を参照してください。

## 環境変数 [#environment]

監視ニーズに合ったNew Relic環境変数を使用して Lambda 関数を構成することが重要です。 ランタイムを選択して、利用可能な環境変数とデフォルト設定の推奨事項を確認してください。

<CollapserGroup>
  <Collapser
    id="go"
    title="Go"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_ACCOUNT_ID`
          </td>

          <td/>

          <td/>

          <td>
            NewRelicアカウントID
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_TRUSTED_ACCOUNT_KEY`
          </td>

          <td/>

          <td/>

          <td>
            New RelicアカウントIDまたは親ID（存在する場合）
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="java"
    title="Java オープントレーシング"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_ACCOUNT_ID`
          </td>

          <td/>

          <td/>

          <td>
            NewRelicアカウントID
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_TRUSTED_ACCOUNT_KEY`
          </td>

          <td/>

          <td/>

          <td>
            New RelicアカウントIDまたは親ID（存在する場合）
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            ディストリビューティッド（分散）トレーシングを有効または無効にする
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PRIMARY_APPLICATION_ID`
          </td>

          <td/>

          <td/>

          <td>
            NewRelicアカウントID
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DEBUG`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            エージェントログレベル
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="node-js"
    title="Node.js"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_ACCOUNT_ID`
          </td>

          <td/>

          <td/>

          <td>
            NewRelicアカウントID
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_TRUSTED_ACCOUNT_KEY`
          </td>

          <td/>

          <td/>

          <td>
            New RelicアカウントIDまたは親ID（存在する場合）
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            ディストリビューティッド（分散）トレーシングを有効または無効にする（Java を除く）
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_NO_CONFIG_FILE`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            Node.jsエージェントはLambdaで環境変数を使用するので、これを次のように設定する必要があります。 `true`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_APP_NAME`
          </td>

          <td/>

          <td/>

          <td>
            設定する必要がありますが、New Relic UI では使用されません。 代わりに、エンタープライズ名はAWSインテグレーションから取得されます。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_ENABLED`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`,`false`
          </td>

          <td>
            エージェントログをCloudWatchに出力します
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>

          <td>
            `info`
          </td>

          <td>
            `fatal`、 `error` 、 `warn` 、 `info` 、 `debug` 、 `trace`
          </td>

          <td>
            エージェントログレベル
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG`
          </td>

          <td>
            `stdout`
          </td>

          <td>
            `stdout`
          </td>

          <td>
            サーバーレス モードの Node.js エージェントの場合、エージェント ログ パスは stdout である必要があります。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_USE_ESM`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            コールバックではなくasync/awaitを使用するESM関数
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_NATIVE_METRICS_ENABLED`
          </td>

          <td>
            `true`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            コールド スタートの期間を短縮するには、false に設定する必要があります。 `false`に設定するとVMメトリクスは収集されません
          </td>
        </tr>
      </tbody>
    </table>

    さらに多くの環境変数については[、Node.js 設定ドキュメント](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/)をご覧ください。
  </Collapser>

  <Collapser
    id="python"
    title="Python"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_ACCOUNT_ID`
          </td>

          <td/>

          <td/>

          <td>
            NewRelicアカウントID
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_TRUSTED_ACCOUNT_KEY`
          </td>

          <td/>

          <td/>

          <td>
            New RelicアカウントIDまたは親ID（存在する場合）
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            ディストリビューティッド（分散）トレーシングを有効または無効にする（Java を除く）
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_NO_CONFIG_FILE`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            エージェントはLambdaで環境変数を使用するため、これをtrueに設定する必要があります
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_APP_NAME`
          </td>

          <td/>

          <td/>

          <td>
            設定する必要がありますが、New Relic UI では使用されません。 代わりに、エンタープライズ名はAWSインテグレーションから取得されます。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG`
          </td>

          <td>
            `stderr`
          </td>

          <td>
            `stderr`
          </td>

          <td>
            サーバーレス モードの Python エージェントの場合、エージェント ログ パスは`stderr `である必要があります
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>

          <td>
            `info`
          </td>

          <td>
            `critical`、`error`、`warning`、`info`、 `debug`
          </td>

          <td>
            エージェントログレベル
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_SERVERLESS_MODE_ENABLED`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            エージェントがサーバーレスモードで実行されるように、これを`true`に設定する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_PACKAGE_REPORTING_ENABLED`
          </td>

          <td>
            `true`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            コールドスタート時間を改善するには、Python エージェント パッケージ レポートを`false`に設定する必要があります。
          </td>
        </tr>
      </tbody>
    </table>

    その他の環境変数については、 [Python 設定ドキュメント](/docs/apm/agents/python-agent/configuration/python-agent-configuration)をご覧ください。
  </Collapser>

  <Collapser
    id="ruby"
    title="Ruby"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_ACCOUNT_ID`
          </td>

          <td/>

          <td/>

          <td>
            NewRelicアカウントID
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_TRUSTED_ACCOUNT_KEY`
          </td>

          <td/>

          <td/>

          <td>
            New RelicアカウントIDまたは親ID（存在する場合）
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            ディストリビューティッド（分散）トレーシングを有効または無効にする
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LAMBDA_HANDLER`
          </td>

          <td/>

          <td/>

          <td>
            関数の元のHandler値に設定します
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    id="dotnet"
    title=".NET"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `CORECLR_ENABLE_PROFILING`
          </td>

          <td/>

          <td>
            `0`, `1`
          </td>

          <td>
            必須: .NET エージェントがアプリケーションを計測するには、これを`1`に設定する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            `CORECLR_PROFILER`
          </td>

          <td/>

          <td>
            `{36032161-FFC0-4B61-B559-F6C5D41BAE5A}`
          </td>

          <td>
            必須: .NET エージェントがアプリケーションを計測するには、これを`{36032161-FFC0-4B61-B559-F6C5D41BAE5A}`に設定する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            `CORECLR_NEWRELIC_HOME`
          </td>

          <td/>

          <td>
            `/opt/lib/newrelic-dotnet-agent`
          </td>

          <td>
            必須: .NET エージェントがアプリケーションを計測するには、これを`/opt/lib/newrelic-dotnet-agent`に設定する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            `CORECLR_PROFILER_PATH`
          </td>

          <td/>

          <td>
            `/opt/lib/newrelic-dotnet-agent/libNewRelicProfiler.so`
          </td>

          <td>
            必須: .NET エージェントがアプリケーションを計測するには、これを`/opt/lib/newrelic-dotnet-agent/libNewRelicProfiler.so`に設定する必要があります。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_APP_NAME`
          </td>

          <td/>

          <td/>

          <td>
            設定する必要がありますが、New Relic UI では使用されません。 代わりに、エンタープライズ名はAWSインテグレーションから取得されます。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_LEVEL`
          </td>

          <td>
            `info`
          </td>

          <td>
            `info`、 `debug` 、 `finest`
          </td>

          <td>
            エージェントログレベル
          </td>
        </tr>

        <tr>
          <td>
            `NEWRELIC_LOG_CONSOLE`
          </td>

          <td>
            `0`
          </td>

          <td>
            `1`, `0`
          </td>

          <td>
            ログメッセージをコンソールに送信する
          </td>
        </tr>
      </tbody>
    </table>

    その他の環境変数については[、.NET 設定ドキュメント](/docs/apm/agents/net-agent/configuration/net-agent-configuration/)をご覧ください。
  </Collapser>

  <Collapser
    id="extension"
    title="ラムダ拡張"
  >
    <table>
      <thead>
        <tr>
          <th>
            環境変数
          </th>

          <th>
            デフォルト値
          </th>

          <th>
            オプション
          </th>

          <th>
            説明
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            `NEW_RELIC_LAMBDA_EXTENSION_ENABLED`
          </td>

          <td>
            `true`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            拡張機能を有効または無効にする
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>

          <td/>

          <td/>

          <td>
            New Relic 取り込みキー。 これはシークレットマネージャーを上書きします
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LICENSE_KEY_SECRET`
          </td>

          <td>
            `NEW_RELIC_LICENSE_KEY`
          </td>

          <td/>

          <td>
            AWS Secrets Manager のカスタムシークレット名
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LAMBDA_HANDLER`
          </td>

          <td/>

          <td/>

          <td>
            New Relic の[手動ラッピング方法を](https://github.com/newrelic/newrelic-lambda-layers?tab=readme-ov-file#note-on-performance-for-es-module-functions)使用しない場合、これが関数のハンドラーになります。
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_DATA_COLLECTION_TIMEOUT`
          </td>

          <td>
            10s
          </td>

          <td/>

          <td>
            タイムアウト時間を短縮する `Telemetry client error`
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_EXTENSION_LOGS_ENABLED`
          </td>

          <td>
            `true`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            `NR_EXT`ログ行を有効または無効にする
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_EXTENSION_LOG_LEVEL`
          </td>

          <td>
            `info`
          </td>

          <td>
            `info`, `debug`
          </td>

          <td>
            NR_EXT ログ行のログレベル
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_EXTENSION_SEND_FUNCTION_LOGS`
          </td>

          <td>
            `false`
          </td>

          <td>
            `true`, `false`
          </td>

          <td>
            機能ログを送信する
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_LOG_ENDPOINT`
          </td>

          <td/>

          <td/>

          <td>
            [https://log-api.newrelic.com/log/v](https://log-api.newrelic.com/log/v)に設定します
          </td>
        </tr>

        <tr>
          <td>
            `NEW_RELIC_TELEMETRY_ENDPOINT`
          </td>

          <td>
            [米国のエンドポイント](https://cloud-collector.newrelic.com/aws/lambda/v1)に設定
          </td>

          <td/>

          <td>
            オプションの[EU弁護士](https://github.com/newrelic/newrelic-lambda-extension/blob/3c4218dd7727d0b0467f24f0902b616b7f4e46b7/telemetry/client.go#L24-L27)
          </td>
        </tr>
      </tbody>
    </table>

    New Relic 拡張機能のその他の環境変数については、 [ドキュメント](https://github.com/newrelic/newrelic-lambda-extension/blob/cf86fb53f0bd816e1d09d07f7b5c5ab4841010a0/config/config.go#L41-L55)をご覧ください。
  </Collapser>
</CollapserGroup>